{% extends "base.html" %}
{% from "components/typography.html" import hero %}
{% from "components/ui.html" import button %}

{% block title %}GAME OF LIFE{% endblock %}

{% block content %}
<div class="bg-slate-50 p-8 font-primary min-h-screen">

  {% call hero("GAME OF LIFE", "A simple implementation of Conway's Game of Life") %}
        {{ info_modal(
            id="test",
            title=md_meta_i18n("docs/projects/game_of_life", "title"),
            text=md_page_i18n("docs/projects/game_of_life"),
            button_label="Infos"
        ) }}
    {% endcall %}

  <h2 class="p-4 text-xl font-bold">
    {{ t({"fr":"Choisir la taille de la grille : ", "en":"Choose your grid size"}) }}
  </h2>

  
  <select id="grid-size" class="border rounded p-6 text-xl">
    <option value="auto">Auto</option>
    <option value="30x30">30×30</option>
    <option value="40x40">40×40</option>
    <option value="60x60">60×60</option>
    <option value="60x80">60×80</option>
  </select>

  {{ button("Appliquer", variant="first", id="apply-grid", data_action="apply-grid") }}


  <!-- Boutons -->
   <h2 class="p-4 text-xl font-bold">
    {{ t({"fr":"Cliquer pour construire votre propre pattern ou réinitialiser aléatoirement : ", "en":"Click to build your own pattern or random reset!"}) }}
  </h2>
  <div class="mt-5 flex flex-wrap gap-3">
    {{ button("Random Reset", variant="second", id="reset", data_action="reset") }}
    {{ button("Clear Game", variant="second", id="clear", data_action="clear") }}
  </div>

  <!-- Pattern controls -->
  <div class="mt-6 flex flex-wrap items-center gap-3">
    <input id="pattern-name"
           class="w-full sm:w-72 rounded-xl border border-slate-300 bg-white px-4 py-2 shadow-sm
                  focus:border-primary-500 focus:ring-2 focus:ring-primary-200 focus:outline-none"
           placeholder="Nom du pattern (ex: glider1)" />

    {{ button("Save Pattern",
              variant="third",
              id="save-pattern",
              data_action="save-pattern") }}

    <select id="pattern-select"
            class="w-full sm:w-72 rounded-xl border border-slate-300 bg-white px-4 py-2 shadow-sm
                   focus:border-primary-500 focus:ring-2 focus:ring-primary-200 focus:outline-none">
      <option value="">-- choisir un pattern --</option>

      <!-- Patterns enregistrés : rempli en JS -->
      <optgroup label="Enregistrés" id="saved-optgroup"></optgroup>

      <!-- Patterns génériques -->
      <optgroup label="Génériques">
        {% for name in patterns %}
          <option value="gen:{{ name }}">{{ name }}</option>
        {% endfor %}
      </optgroup>
    </select>

    {{ button("Load Pattern",
              variant="third",
              id="load-pattern",
              data_action="load-pattern",
              extra_class="rounded-2xl") }}
  </div>

  <!-- Grille -->
  <div id="grid-container" class="mt-6 rounded-2xl border border-slate-200 bg-white p-4 shadow-sm overflow-auto"></div>

  <div class="mt-5 flex flex-wrap justify-center-safe gap-3">
    {{ button("Start Game", variant="first", id="start", data_action="start") }}
    {{ button("Stop Game", variant="second", id="stop", data_action="stop") }}
  </div>
</div>
{% endblock %}

{% block css %}
  {{ super() }}
  <link rel="stylesheet" href="{{ url_for('game_of_life.static', filename='css/projet_game_of_life.css') }}">
{% endblock %}

{% block js %}
<script>
  window.GOL_BASE_URL = "{{ url_for('game_of_life.home') }}";
</script>
<script src="{{ url_for('game_of_life.static', filename='js/game_of_life.js') }}"></script>
{% endblock %}