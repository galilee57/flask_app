{% extends "base.html" %}
{% from "components/typography.html" import hero %}
{% from "components/ui.html" import button %}
{% from "components/ui.html" import submit %}

{% block title %}MUSCULATION PROGRAM BUILDER{% endblock %}

{% block content %}
<div class="bg-gray-100 p-8 min-h-screen">

  {{ hero(
      "MUSCULATION PROGRAM BUILDER",
      t({
        "fr": "Ici, vous pouvez évaluer l'équilibre de votre programme entre force, hypertrophie et endurance.",
        "en": "Here you can evaluate your program's balance between strength, hypertrophy and endurance."
      })
  ) | safe }}

  <!-- PROGRAM FORM -->
  <form id="programForm" class="mt-6 flex flex-col gap-4">
    {{ workout_form.hidden_tag() }}

    <h2 class="text-2xl font-bold text-gray-900">
      {{ t({"fr":"Créez votre programme d'entraînement :", "en":"Create your training program :"}) }}
    </h2>

    <div class="flex flex-wrap items-end gap-3">
      
        {{ workout_form.plan_name(
        id="plan_name",
        class="w-64 h-12 text-base rounded-xl border border-gray-300 bg-white px-3 shadow-sm outline-none focus:border-primary-500 focus:ring-2 focus:ring-primary-200",
        placeholder=t({"fr":"Nom du programme", "en":"Program name"})
        ) }}

        {% for error in workout_form.plan_name.errors %}
        <div class="mt-1 text-sm text-red-600">{{ error }}</div>
        {% endfor %}

        <div>
            {{ submit(workout_form.new_submit,
            label=t({"fr":"Créer", "en":"Create"}),
            variant="first",
            id="new_program",
            extra_class="h-12 text-base"
            ) }}
        </div>

    </div>

  <div>

    <h2 class="text-2xl font-bold text-gray-900 mt-4">
      {{ t({"fr":"ou choisissez un programme existant :", "en":"or choose an existing program :"}) }}
    </h2>
    
    <div class="flex flex-wrap items-end gap-3">

        <select id="programSelect"
            class="w-64 h-12 text-base rounded-xl border border-gray-300 bg-white px-3 shadow-sm outline-none focus:border-primary-500 focus:ring-2 focus:ring-primary-200">
            <option value="">-- {{ t({"fr":"Choisir", "en":"Choose"}) }} --</option>
        </select>

        <div>
            {{ submit(workout_form.load_submit,
            label=t({"fr":"Charger", "en":"Load"}),
            variant="second",
            id="load_program"
            ) }}
        </div>
        <div>
            {{ submit(workout_form.reset_submit,
            label=t({"fr":"Réinitialiser", "en":"Reset"}),
            variant="second",
            id="reset_program"
            ) }}
        </div>
    
  </div>

</div>

      

      
    </div>
  </form>

  <!-- EXERCISE CONTAINER -->
  <div id="exerciseContainer" class="mt-8 hidden">
    <h2 class="bg-secondary-300 p-4 text-3xl font-bold rounded-2xl w-full md:w-1/3">
      {{ t({"fr":"Détails des exercices", "en":"Exercise details"}) }}
    </h2>

    <form id="exerciseForm" class="mt-4 flex flex-wrap items-end gap-3">
      <div class="flex flex-col">
        <label for="exerciseSelect" class="mb-1 text-sm font-medium text-gray-700">
          {{ t({"fr":"Choisir un exercice", "en":"Select an exercise"}) }}
        </label>

        <select id="exerciseSelect"
          class="w-64 rounded-xl border border-gray-300 bg-white px-3 py-2 shadow-sm outline-none focus:border-primary-500 focus:ring-2 focus:ring-primary-200">
          <option value="">-- {{ t({"fr":"Choisir", "en":"Choose"}) }} --</option>
        </select>
      </div>

      <div class="flex flex-col">
        <label for="nb_rep" class="mb-1 text-sm font-medium text-gray-700">
          {{ t({"fr":"Répétitions", "en":"Reps"}) }}
        </label>

        {{ exercise_form.reps(
          class="w-64 rounded-xl border border-gray-300 bg-white px-3 py-2 shadow-sm outline-none focus:border-primary-500 focus:ring-2 focus:ring-primary-200",
          id="nb_rep",
          placeholder=t({"fr":"Nombre de reps", "en":"Number of reps"})
        ) }}

        {% for error in exercise_form.reps.errors %}
          <div class="mt-1 text-sm text-red-600">{{ error }}</div>
        {% endfor %}
      </div>

      <div class="flex flex-col">
        <label for="weight" class="mb-1 text-sm font-medium text-gray-700">
          {{ t({"fr":"Poids", "en":"Weight"}) }}
        </label>

        {{ exercise_form.weight(
          class="w-64 rounded-xl border border-gray-300 bg-white px-3 py-2 shadow-sm outline-none focus:border-primary-500 focus:ring-2 focus:ring-primary-200",
          id="weight",
          placeholder=t({"fr":"Poids (kg)", "en":"Weight (kg)"})
        ) }}

        {% for error in exercise_form.weight.errors %}
          <div class="mt-1 text-sm text-red-600">{{ error }}</div>
        {% endfor %}
      </div>

      <div>
        {{ submit(exercise_form.submit,
          label=t({"fr":"Ajouter", "en":"Add"}),
          variant="first",
          id="add_exercice_form"
        ) }}
      </div>
    </form>

    <div id="exerciseDetails" class="mt-4"></div>
  </div>

  <!-- PROGRAM DETAILS -->
  <div id="programContainer" class="mt-8 hidden">
    <h2 class="bg-secondary-300 p-4 text-3xl font-bold rounded-2xl w-full md:w-1/3">
      {{ t({"fr":"Détails du programme", "en":"Program details"}) }}
    </h2>
    <div id="programDetails" class="mt-4"></div>

    <div>
        {{ submit(workout_form.save_submit,
          label=t({"fr":"Sauvegarder", "en":"Save"}),
          variant="first",
          id="save_program"
        ) }}
      </div>

      <div>
        {{ submit(workout_form.reset_submit,
          label=t({"fr":"Supprimer", "en":"Delete"}),
          variant="first",
          id="reset_program"
        ) }}
      </div>
  </div>

  <!-- ANALYSIS -->
  <div id="analysisContainer" class="mt-8 hidden pb-3">
    <h2 class="text-2xl font-bold text-gray-900">
      {{ t({"fr":"Analyse du programme", "en":"Program analysis"}) }}
    </h2>

    <div class="mt-3">
      {{ submit(workout_form.analyse_submit,
        label=t({"fr":"Analyser", "en":"Analyze"}),
        variant="first",
        id="analyze_program"
      ) }}
    </div>

    <div id="programAnalysis" class="mt-4"></div>
  </div>

</div>
{% endblock %}